  const express = require('express');
  const mongoose = require('mongoose');
  const app = express();
  const bodyParser = require('body-parser');
  require('dotenv/config');

  app.use(express.json());

  //Import Routes
  const usersRoute = require('./routes/users');
  const cartsRoute = require('./routes/carts');
  const storeItemsRoute = require ('./routes/storeItems');

  //Middleware
  app.use('/users', usersRoute);
  app.use('/cart', cartsRoute);
  app.use('/StoreItem', storeItemsRoute);
  app.use(bodyParser.json());

  //database setup
  mongoose.connect(process.env.DB_CONNECTION,
      { useNewUrlParser: true, useUnifiedTopology: true},
    () => console.log('connected to DB')
  );

  //Routes
  app.get('/', (req,res) => {
    res.send('Homepage');
  })


module.exports = app;
