const express = require('express');
const StoreItem = require('../models/storeItems');
const router = express.Router();

//sample data
let storeItems = [
    { id: 1, product: "Kitchen knife" },
    { id: 2, product: "Chainsaw" },
    { id: 3, product: "Infernal powers" }
];

let carts = [
    {
        cartID: 1, cartItems: [
            { itemID: 1, quantity: 1 },
            { itemID: 2, quantity: 1 },
            {itemID: 3, quantity: 1}
        ],
    }];

let users = [
    {
        id: 1, firstName: "Jason", lastName: "Voorhees", email: "jason13@live.com",
        cart: carts[0]
    }
];

//gets all store items
router.get('/', async (req, res) => {
    try{
        const allStoreItems = await StoreItem.find();
        res.json(allStoreItems);
    } catch(err){
        res.json({message:err});
    }
});

//gets SPECIFIC store item
router.get('/StoreItem/:StoreItemID', async(req, res) => {
    try {
        const foundStoreItem = await StoreItem.findById(req.params.StoreItemID)
        res.json(foundStoreItem);
    } catch(err){
        res.json({message:err});
    }
});

//posts a new store item
router.post('/StoreItem', async (req, res) => {

    const newStoreItem = new StoreItem({
        id: storeItems.length + 1,
        product: req.body.product
    });
    try {
        const savedStoreItem = await newStoreItem.save();
        res.json(savedStoreItem);
    } catch(err){
        res.status(404);
    }
});

module.exports = router;
